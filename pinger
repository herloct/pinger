#!/usr/bin/env php
<?php

require __DIR__ . '/vendor/autoload.php';

use \Loct\Pinger\Command\PingCommand;
use \Loct\Pinger\Provider as Provider;
use \Pimple\Container;
use \Symfony\Component\Console\Application;

$pimple = new Container();
$pimple['app_path'] = __DIR__ . '/app';

$pimple->register(new Provider\ConfigProvider());
$pimple->register(new Provider\NotifierProvider());

$config = $pimple['config'];

$hosts = $config->get('pinger.hosts');
$notifier = $pimple['notifier'];

$application = new Application();
$application->add(new PingCommand($hosts, $notifier));
$application->run();
